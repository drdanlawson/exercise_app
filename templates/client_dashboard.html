<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Client Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Select2 Dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<style>
  .select2-container {
    width: 100% !important;
  }
  #exercisePlotContainer canvas {
    max-width: 800px;
  }
</style>

</head>
<body>
    <h1>Client Dashboard for ID: {{ client_id }}</h1>

    <label for="start">Start date:</label>
    <input type="date" id="start" name="start">

    <label for="end">End date:</label>
    <input type="date" id="end" name="end">

    <button onclick="filterData()">Filter</button>

    <div>
        <canvas id="volumeChart"></canvas>
        <canvas id="setChart"></canvas>
        <canvas id="maxWeightChart"></canvas>
        <canvas id="avgWeightChart"></canvas>
    </div>

<hr>
<h2>Exercise-Specific Longitudinal Trends</h2>

<label for="start">Start date:</label>
<input type="date" id="start" name="start">
<label for="end">End date:</label>
<input type="date" id="end" name="end">

<label>Select up to 5 Exercises:</label>
<select id="exerciseSelect" multiple="multiple" style="width: 100%;"></select><br><br>

<button onclick="fetchBatchExerciseData()">Generate Exercise Charts</button>

<div id="exercisePlotContainer" style="margin-top: 40px;"></div>

<script>
// ✅ Wait for DOM before initializing Select2 and loading exercises
document.addEventListener("DOMContentLoaded", function () {
  // Set default dates
  const endInput = document.getElementById("end");
  const startInput = document.getElementById("start");

  const today = new Date();
  const prior = new Date();
  prior.setDate(today.getDate() - 30);

  endInput.value = today.toISOString().split("T")[0];
  startInput.value = prior.toISOString().split("T")[0];

  // Now load exercise metadata + Select2
  fetch("/cache/exercise_metadata.json")
    .then(res => res.json())
    .then(data => {
      const $select = $('#exerciseSelect');
      Object.entries(data).forEach(([id, meta]) => {
        $select.append(new Option(`${meta.name} (ID: ${id})`, id));
      });

      $select.select2({
        placeholder: "Search exercises...",
        allowClear: true,
        maximumSelectionLength: 5,
        width: 'resolve'
      });
    });
});


// ✅ Fetch and render selected exercise plots
function fetchBatchExerciseData() {
  const clientId = "{{ client_id }}";
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  const selectedExercises = $('#exerciseSelect').val();

  if (!start || !end) {
    alert("Please select a start and end date.");
    return;
  }

  if (!selectedExercises || selectedExercises.length === 0) {
    alert("Please select at least one exercise.");
    return;
  }

  fetch("/batch-exercise-longitudinal-data", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      client_id: clientId,
      exercise_ids: selectedExercises,
      start_date: start,
      end_date: end
    })
  })
  .then(res => res.json())
  .then(data => renderExercisePlots(data))
  .catch(err => {
    console.error("Error fetching data:", err);
    alert("Something went wrong fetching exercise data.");
  });
}

// ✅ Plot 1 chart per selected exercise
function renderExercisePlots(responseData) {
  const container = document.getElementById("exercisePlotContainer");
  container.innerHTML = "";

  for (const [exerciseId, { name, data }] of Object.entries(responseData)) {
    const dates = Object.keys(data).sort();
    const volumes = dates.map(d => data[d].volume);

    const chartDiv = document.createElement("div");
    chartDiv.style.marginBottom = "40px";

    const title = document.createElement("h4");
    title.innerText = `${name} (ID: ${exerciseId})`;

    const canvas = document.createElement("canvas");

    chartDiv.appendChild(title);
    chartDiv.appendChild(canvas);
    container.appendChild(chartDiv);

    if (dates.length === 0) {
      const note = document.createElement("p");
      note.innerText = "No data logged for this exercise.";
      chartDiv.appendChild(note);
      continue;
    }

    new Chart(canvas, {
      type: 'line',
      data: {
        labels: dates,
        datasets: [{
          label: 'Volume (weight × reps)',
          data: volumes,
          borderColor: 'rgba(75,192,192,1)',
          borderWidth: 2,
          fill: false,
          tension: 0.2
        }]
      },
      options: {
        responsive: true,
        plugins: {
          title: {
            display: true,
            text: `${name} Volume Over Time`
          }
        },
        scales: {
          x: { title: { display: true, text: 'Date' }},
          y: { title: { display: true, text: 'Volume' }}
        }
      }
    });
  }
}
</script>



    <h2>Pre vs Post Workout Comparison</h2>

<label>Pre Start:</label><input type="date" id="pre_start">
<label>Pre End:</label><input type="date" id="pre_end">
<br>
<label>Post Start:</label><input type="date" id="post_start">
<label>Post End:</label><input type="date" id="post_end">
<br>
<button onclick="filterPrePost()">Compare Pre vs Post</button>

<div>
    <canvas id="prePostVolumeChart"></canvas>
    <canvas id="prePostSetChart"></canvas>
    <canvas id="prePostMaxChart"></canvas>
    <canvas id="prePostAvgChart"></canvas>
</div>

<h2>Compare Specific Exercises (Pre vs Post)</h2>
<label for="ex-pre-start">Pre Start:</label>
<input type="date" id="ex-pre-start">
<label for="ex-pre-end">Pre End:</label>
<input type="date" id="ex-pre-end">
<label for="ex-post-start">Post Start:</label>
<input type="date" id="ex-post-start">
<label for="ex-post-end">Post End:</label>
<input type="date" id="ex-post-end">
<button onclick="compareExercisePrePost()">Compare Exercises</button>

<canvas id="exVolumeChart"></canvas>
<canvas id="exMaxWeightChart"></canvas>
<canvas id="exAvgWeightChart"></canvas>


<script>
    let volumeChart, setChart, maxWeightChart, avgWeightChart;

    function renderCharts(data) {
        const labels = Object.keys(data);
        const volumes = labels.map(date => data[date].volume);
        const sets = labels.map(date => data[date].sets);
        const maxWeights = labels.map(date => data[date].max_weight);
        const avgWeights = labels.map(date => data[date].avg_weight);  // <-- ADD THIS

        if (volumeChart) volumeChart.destroy();
        if (setChart) setChart.destroy();
        if (maxWeightChart) maxWeightChart.destroy();
        if (avgWeightChart) avgWeightChart.destroy();  // <-- Also destroy this if it already exists

        const ctx1 = document.getElementById('volumeChart').getContext('2d');
        volumeChart = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Training Volume',
                    data: volumes
                }]
            }
        });

        const ctx2 = document.getElementById('setChart').getContext('2d');
        setChart = new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Set Volume',
                    data: sets
                }]
            }
        });

        const ctx3 = document.getElementById('maxWeightChart').getContext('2d');
        maxWeightChart = new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Max Weight',
                    data: maxWeights
                }]
            }
        });

        const ctx4 = document.getElementById('avgWeightChart').getContext('2d');
        avgWeightChart = new Chart(ctx4, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Average Weight',
                    data: avgWeights
                }]
            }
        });
    }

    function filterData() {
        const start = document.getElementById('start').value;
        const end = document.getElementById('end').value;
        const clientId = "{{ client_id }}";

        if (!start || !end) {
            alert("Please select both start and end dates.");
            return;
        }

        fetch("/filter-client-data", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                start_date: start,
                end_date: end,
                client_id: clientId
            })
        })
        .then(response => response.json())
        .then(data => {
            renderCharts(data);
        })
        .catch(error => {
            console.error("Error fetching filtered data:", error);
        });
    }

    function filterPrePost() {
    const preStart = document.getElementById("pre_start").value;
    const preEnd = document.getElementById("pre_end").value;
    const postStart = document.getElementById("post_start").value;
    const postEnd = document.getElementById("post_end").value;
    const clientId = "{{ client_id }}";

    if (!preStart || !preEnd || !postStart || !postEnd) {
        alert("Please fill in all date ranges.");
        return;
    }

    fetch("/filter-pre-post-data", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            client_id: clientId,
            pre_start: preStart,
            pre_end: preEnd,
            post_start: postStart,
            post_end: postEnd
        })
    })
    .then(res => res.json())
    .then(data => renderPrePostCharts(data));
}

function renderPrePostCharts(data) {
    const labels = data.map(d => d.label);
    const preVolume = data.map(d => d.pre.volume);
    const postVolume = data.map(d => d.post.volume);
    const preSets = data.map(d => d.pre.sets);
    const postSets = data.map(d => d.post.sets);
    const preMax = data.map(d => d.pre.max_weight);
    const postMax = data.map(d => d.post.max_weight);
    const preAvg = data.map(d => d.pre.avg_weight);
    const postAvg = data.map(d => d.post.avg_weight);

    new Chart(document.getElementById("prePostVolumeChart"), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: "Pre Volume", data: preVolume },
                { label: "Post Volume", data: postVolume }
            ]
        }
    });

    new Chart(document.getElementById("prePostSetChart"), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: "Pre Sets", data: preSets },
                { label: "Post Sets", data: postSets }
            ]
        }
    });

    new Chart(document.getElementById("prePostMaxChart"), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: "Pre Max", data: preMax },
                { label: "Post Max", data: postMax }
            ]
        }
    });

    new Chart(document.getElementById("prePostAvgChart"), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: "Pre Avg", data: preAvg },
                { label: "Post Avg", data: postAvg }
            ]
        }
    });
}

let exVolumeChart, exMaxWeightChart, exAvgWeightChart;

function compareExercisePrePost() {
    const clientId = "{{ client_id }}";
    const preStart = document.getElementById("ex-pre-start").value;
    const preEnd = document.getElementById("ex-pre-end").value;
    const postStart = document.getElementById("ex-post-start").value;
    const postEnd = document.getElementById("ex-post-end").value;

    if (!preStart || !preEnd || !postStart || !postEnd) {
        alert("Please fill all Pre and Post dates.");
        return;
    }

    fetch("/filter-exercise-pre-post-data", {
        method: "POST",
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            client_id: clientId,
            pre_start: preStart,
            pre_end: preEnd,
            post_start: postStart,
            post_end: postEnd
        })
    })
    .then(response => response.json())
    .then(data => {
        renderExerciseCharts(data);
    })
    .catch(err => console.error("Exercise compare error:", err));
}

function renderExerciseCharts(data) {
    const { volume, max_weight, avg_weight } = data;

    [exVolumeChart, exMaxWeightChart, exAvgWeightChart].forEach(chart => {
        if (chart) chart.destroy();
    });

    const createChart = (ctxId, label, dataset) => {
        const ctx = document.getElementById(ctxId).getContext('2d');
        return new Chart(ctx, {
            type: 'bar',
            data: {
                labels: dataset.labels,
                datasets: [
                    {
                        label: 'Pre',
                        data: dataset.pre,
                        backgroundColor: 'rgba(54, 162, 235, 0.7)'
                    },
                    {
                        label: 'Post',
                        data: dataset.post,
                        backgroundColor: 'rgba(255, 99, 132, 0.7)'
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: label
                    }
                }
            }
        });
    };

    exVolumeChart = createChart("exVolumeChart", "Exercise Volume (Pre vs Post)", volume);
    exMaxWeightChart = createChart("exMaxWeightChart", "Exercise Max Weight (Pre vs Post)", max_weight);
    exAvgWeightChart = createChart("exAvgWeightChart", "Exercise Avg Weight (Pre vs Post)", avg_weight);
}

</script>

<!-- Section 4: Expandable Pre-Post Comparison Table by Exercise -->
<h2>Pre-Post Comparison Table by Exercise</h2>
<label>Pre Range:</label>
<input type="date" id="preStart"> to <input type="date" id="preEnd">
<label>Post Range:</label>
<input type="date" id="postStart"> to <input type="date" id="postEnd">
<button onclick="loadExerciseTable()">Compare Exercises</button>

<!-- DataTable dependencies -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<table id="exerciseTable" class="display">
<thead>
    <tr>
        <th>Exercise</th>
        <th>Phase</th>
        <th>Primary Muscle Group</th>
        <th>Secondary Muscle Groups</th>
        <th>Total Sets</th>
        <th>Total Reps</th>
        <th>Avg Reps</th>
        <th>Avg Weight</th>
        <th>Max Weight</th>
        <th>Details</th>
    </tr>
</thead>

    <tbody id="exerciseTableBody"></tbody>
</table>

<style>
    table.dataTable tbody td {
        vertical-align: top;
    }
    .details-table {
        margin-top: 10px;
        margin-left: 20px;
    }
</style>

<script>
function loadExerciseTable() {
    const preStart = document.getElementById('preStart').value;
    const preEnd = document.getElementById('preEnd').value;
    const postStart = document.getElementById('postStart').value;
    const postEnd = document.getElementById('postEnd').value;
    const clientId = "{{ client_id }}";

    fetch("/filter-pre-post-exercise-data", {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            client_id: clientId,
            pre_start: preStart,
            pre_end: preEnd,
            post_start: postStart,
            post_end: postEnd
        })
    })
    .then(res => res.json())
    .then(data => {
        const tableBody = document.getElementById("exerciseTableBody");
        tableBody.innerHTML = "";
        data.forEach(row => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${row.exercise}</td>
                <td>${row.phase}</td>
                <td>${row.primary_muscle_group || "N/A"}</td>
                <td>${(row.secondary_muscle_groups || []).join(", ")}</td>
                <td>${row.total_sets}</td>
                <td>${row.total_reps}</td>
                <td>${row.avg_reps.toFixed(1)}</td>
                <td>${row.avg_weight.toFixed(1)}</td>
                <td>${row.max_weight}</td>
                <td><button onclick='toggleDetails("${row.exercise}_${row.phase}")'>Toggle</button></td>
            `;
            tableBody.appendChild(tr);

            const detailTr = document.createElement("tr");
            detailTr.style.display = "none";
            detailTr.id = `${row.exercise}_${row.phase}`;
            detailTr.innerHTML = `
                <td colspan="8">
                    <table class='details-table'>
                        <thead>
                            <tr><th>Date</th><th>Reps</th><th>Weight</th></tr>
                        </thead>
                        <tbody>
                            ${row.sets.map(set => `<tr><td>${set.date}</td><td>${set.reps}</td><td>${set.weight}</td></tr>`).join('')}
                        </tbody>
                    </table>
                </td>
            `;
            tableBody.appendChild(detailTr);
        });

        if ($.fn.DataTable.isDataTable('#exerciseTable')) {
            $('#exerciseTable').DataTable().destroy();
        }
        $('#exerciseTable').DataTable();
    });
}

function toggleDetails(id) {
    const row = document.getElementById(id);
    row.style.display = row.style.display === "none" ? "table-row" : "none";
}
</script>

<!-- Section 5: Weekly Muscle Group Analysis -->
<style>
  #muscleGroupWeeklyCharts {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }
  .chart-wrapper {
    width: 32%;
    min-width: 300px;
    box-sizing: border-box;
    margin-bottom: 20px;
  }
  .chart-wrapper canvas {
    width: 100% !important;
    height: 300px !important;
  }
</style>

<h3>Total Set Volume per Muscle Group (All Weeks)</h3>
<canvas id="muscleGroupSummaryChart"></canvas>

<h3>Average Weekly Set Volume per Muscle Group</h3>
<canvas id="muscleGroupWeeklyAverageChart"></canvas>

<label for="weekly-start">Start Date:</label>
<input type="date" id="weekly-start">
<label for="weekly-end">End Date:</label>
<input type="date" id="weekly-end">
<button onclick="fetchWeeklyMuscleGroupData()">Show Weekly Trends</button>

<h3>Select Muscle Groups to Display:</h3>
<div id="muscleGroupToggles"></div>

<h2>Weekly Set Volume by Muscle Group</h2>
<div id="muscleGroupWeeklyCharts"></div>

<script>
let summaryChart, averageChart;
let muscleGroupData = {};

function fetchWeeklyMuscleGroupData() {
    const clientId = "{{ client_id }}";
    const start = document.getElementById("weekly-start").value;
    const end = document.getElementById("weekly-end").value;

    if (!start || !end) {
        alert("Please select both start and end dates.");
        return;
    }

    fetch("/muscle-group-weekly-data", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ client_id: clientId, start_date: start, end_date: end })
    })
    .then(res => res.json())
    .then(data => {
        muscleGroupData = data;
        renderSummaryAndAverageCharts(data, start, end);
        createToggleControls(data);
        renderSelectedMuscleCharts();
    });
}

function renderSummaryAndAverageCharts(data, start, end) {
    if (summaryChart) summaryChart.destroy();
    if (averageChart) averageChart.destroy();

    const ctx1 = document.getElementById("muscleGroupSummaryChart").getContext("2d");
    const ctx2 = document.getElementById("muscleGroupWeeklyAverageChart").getContext("2d");

    const labels = Object.keys(data.summary || {});
    const direct = labels.map(mg => data.summary[mg].direct || 0);
    const indirect = labels.map(mg => data.summary[mg].indirect || 0);

    summaryChart = new Chart(ctx1, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: 'Direct Sets', data: direct, backgroundColor: 'rgba(54, 162, 235, 0.7)' },
                { label: 'Indirect Sets', data: indirect, backgroundColor: 'rgba(255, 206, 86, 0.7)' }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                title: { display: true, text: 'Total Sets per Muscle Group (All Weeks)' },
                tooltip: { mode: 'index', intersect: false }
            },
            scales: { x: { stacked: true }, y: { stacked: true } }
        }
    });

    const weekCount = Math.max(1, Math.ceil((new Date(end) - new Date(start)) / (7 * 24 * 60 * 60 * 1000)));
    const avgDirect = direct.map(val => +(val / weekCount).toFixed(1));
    const avgIndirect = indirect.map(val => +(val / weekCount).toFixed(1));

    averageChart = new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: 'Avg Direct Sets/Wk', data: avgDirect, backgroundColor: 'rgba(54, 162, 235, 0.7)' },
                { label: 'Avg Indirect Sets/Wk', data: avgIndirect, backgroundColor: 'rgba(255, 206, 86, 0.7)' }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                title: { display: true, text: 'Average Weekly Sets per Muscle Group' },
                tooltip: { mode: 'index', intersect: false }
            },
            scales: { x: { stacked: true }, y: { stacked: true } }
        }
    });
}

function createToggleControls(data) {
  const toggleContainer = document.getElementById("muscleGroupToggles");
  toggleContainer.innerHTML = "";

  for (const mg in data) {
    // ✅ Skip summary/average keys
    if (["summary", "average_weekly"].includes(mg)) continue;

    // ✅ Skip anything that isn't valid weekly data
    const entries = Object.values(data[mg]);
    if (!entries.length || typeof entries[0] !== 'object') continue;

    const label = document.createElement("label");
    label.style.marginRight = "12px";
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.value = mg;
    checkbox.checked = true;
    checkbox.onchange = renderSelectedMuscleCharts;
    label.appendChild(checkbox);
    label.append(` ${mg}`);
    toggleContainer.appendChild(label);
  }
}


function renderSelectedMuscleCharts() {
  const selected = Array.from(document.querySelectorAll("#muscleGroupToggles input:checked"))
      .map(cb => cb.value);

  const container = document.getElementById("muscleGroupWeeklyCharts");
  container.innerHTML = "";

  selected.forEach(mg => {
    const groupData = muscleGroupData[mg];
    if (!groupData || typeof groupData !== 'object') return;

    const weeks = Object.keys(groupData);
    const direct = weeks.map(w => groupData[w].direct || 0);
    const indirect = weeks.map(w => groupData[w].indirect || 0);

    const wrapper = document.createElement("div");
    wrapper.className = "chart-wrapper";

    const canvas = document.createElement("canvas");
    wrapper.appendChild(canvas);
    container.appendChild(wrapper);

    const ctx = canvas.getContext("2d");
    new Chart(ctx, {
      type: "bar",
      data: {
        labels: weeks,
        datasets: [
          {
            label: "Direct Sets",
            data: direct,
            backgroundColor: "rgba(54, 162, 235, 0.8)",
            stack: "sets"
          },
          {
            label: "Indirect Sets",
            data: indirect,
            backgroundColor: "rgba(255, 206, 86, 0.8)",
            stack: "sets"
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          title: {
            display: true,
            text: `${mg} Weekly Set Volume`
          }
        },
        scales: {
          x: { stacked: true },
          y: { stacked: true, beginAtZero: true }
        }
      }
    });
  });
}


</script>

<!-- Section 6: Weekly Muscle Group Comparison (Current vs Previous Week) -->
<h2>Compare Muscle Group Set Volume Between Two Weeks</h2>
<label for="week-a">Week A Start:</label>
<input type="date" id="week-a">
<label for="week-b">Week B Start:</label>
<input type="date" id="week-b">
<button onclick="compareWeeks()">Compare Weeks</button>
<canvas id="muscleGroupWeekCompareChart"></canvas>

<script>
function compareWeeks() {
    const clientId = "{{ client_id }}";
    const weekA = document.getElementById("week-a").value;
    const weekB = document.getElementById("week-b").value;

    if (!weekA || !weekB) {
        alert("Please select both Week A and Week B start dates.");
        return;
    }

    fetch("/muscle-group-week-comparison", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ client_id: clientId, week_a: weekA, week_b: weekB })
    })
    .then(res => res.json())
    .then(data => renderWeekComparisonChart(data));
}

function renderWeekComparisonChart(data) {
    const ctx = document.getElementById("muscleGroupWeekCompareChart").getContext("2d");
    if (window.weekCompareChart) window.weekCompareChart.destroy();

    const labels = data.labels;
    const weekAData = data.week_a;
    const weekBData = data.week_b;

    window.weekCompareChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                {
                    label: data.label_a,
                    data: weekAData,
                    backgroundColor: 'rgba(54, 162, 235, 0.7)'
                },
                {
                    label: data.label_b,
                    data: weekBData,
                    backgroundColor: 'rgba(255, 99, 132, 0.7)'
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                title: {
                    display: true,
                    text: 'Muscle Group Comparison: Week A vs Week B'
                },
                tooltip: {
                    mode: 'index',
                    intersect: false
                }
            },
            scales: {
                x: {
                    stacked: false
                },
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Set Volume'
                    }
                }
            }
        }
    });
}

</script>



</body>
</html>
